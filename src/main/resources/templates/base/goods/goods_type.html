<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8"></meta>
<title>room_type</title>
<div class="page-header">
        <h1>商品管理
            <small>
                <i class="ace-icon fa fa-angle-double-right"></i>
                                 商品类型管理
            </small>
        </h1>
</div>

<!-- 按钮组 -->
<div class="row">
	<div class="col-xs-12">
		<button class="btn btn-info no-border" data-toggle="modal"
			data-target="#editModal" id="create-goodsType-btn">
			<i class="ace-icon fa fa-plus bigger-120" >新建</i>
		</button>
		<button class="btn btn-danger no-border" id="deleteAll-goodsType-btn">
			<i class="ace-icon fa fa-trash-o bigger-120" >删除</i>
		</button>
		<!-- /.btn-group -->
	</div>

</div>
<!-- [End].row -->

<!-- 列表主题内容 -->
<div class="row">
	<div class="col-xs-12">
		<div class="table-header">商品类型列表</div>
		<!-- <div class="table-responsive"> -->

		<!-- <div class="dataTables_borderWrap"> -->
		<div>
			<table id="sample-table"
				class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th class="center"><label class="position-relative">
						<input type="checkbox" class="ace" /> <span class="lbl"></span>
						</label></th>
						<th>商品类型编号</th>
						<th>商品类型名称</th>
						<th>
							<!-- <i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i> -->
							备注
						</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="goodsType : ${goodsTypes}">
						<td class="center">
						<label class="position-relative">
						<input type="checkbox" class="ace" th:id="${goodsType.id}"
						name="del-goodsType-checkbox" /> <span class="lbl"></span>
						</label>
						</td>
						<td th:text="${goodsType.serialNo}">goodsType.serialNo</td>
						<td th:text="${goodsType.name}">goodsType.name</td>
						<td th:text="${goodsType.remarks}">goodsType.remarks</td>
						<td>
							<div class="hidden-sm hidden-xs action-buttons">
								<a class="green" href="#" name="update-goodsType-btn"
									th:id="${goodsType.id}" data-toggle="modal"
									data-target="#editModal"> 
									<i class="ace-icon fa fa-pencil bigger-130"></i>
								</a> 
								<a class="red" href="#" name="delete-goodsType-btn"
									th:id="${goodsType.id}"> 
									<i class="ace-icon fa fa-trash-o bigger-130"></i>
								</a>
							</div>

							<div class="hidden-md hidden-lg">
								<div class="inline position-relative">
									<button class="btn btn-minier btn-yellow dropdown-toggle"
										data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>

									<ul
										class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">

										<li><a href="#" class="tooltip-success"
											data-rel="tooltip" title="Edit" name="update-goodsType-btn"
											th:id="${goodsType.id}"> <span class="green"> <i
													class="ace-icon fa fa-pencil-square-o bigger-120"></i>
											</span>
										</a></li>

										<li><a href="#" class="tooltip-error" 
											data-rel="tooltip" title="Delete" th:id="${goodsType.id}"
											name="delete-goodsType-btn"> <span class="red"> <i
													class="ace-icon fa fa-trash-o bigger-120"></i>
											</span>
										</a></li>
									</ul>
								</div>
							</div>
						</td>
					</tr>

					<tr th:remove="all">
						<td class="center"><label class="position-relative">
								<input type="checkbox" class="ace" /> <span class="lbl"></span>
						</label></td>

						<td>best.com</td>
						<td>$75</td>
						<td>Apr 03</td>
						<td>
							<div class="hidden-sm hidden-xs action-buttons">
								<a class="blue" href="#"> <i
									class="ace-icon fa fa-search-plus bigger-130"></i>
								</a> <a class="green" href="#"> <i
									class="ace-icon fa fa-pencil bigger-130"></i>
								</a> <a class="red" href="#"> <i
									class="ace-icon fa fa-trash-o bigger-130"></i>
								</a>
							</div>

							<div class="hidden-md hidden-lg">
								<div class="inline position-relative">
									<button class="btn btn-minier btn-yellow dropdown-toggle"
										data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>

									<ul
										class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
										<!-- <li><a href="#" class="tooltip-info" data-rel="tooltip"
											title="View"> <span class="blue"> <i
													class="ace-icon fa fa-plus bigger-120"></i>
											</span>
										</a></li> -->

										<li><a href="#" class="tooltip-success"
											data-rel="tooltip" title="Edit"> <span class="green">
													<i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
											</span>
										</a></li>

										<li><a href="#" class="tooltip-error" data-rel="tooltip"
											title="Delete"> <span class="red"> <i
													class="ace-icon fa fa-trash-o bigger-120"></i>
											</span>
										</a></li>
									</ul>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
			<!-- sample-table -->
		</div>
	</div>
</div>

<!-- 信息编辑模态框 -->
<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
				</button>
				<h4 class="modal-title" id="myModalLabel">商品类型编辑</h4>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-xs-12">
						<!-- 表单主题 -->
						<form class="form-horizontal" id="edit-goodstype-form" role="form">
							<input type="hidden" name="id" />
							<!-- #section:elements.form -->
							<div class="form-group">
								<label class="col-sm-3 control-label no-padding-right"
									for="form-field-1"> 类型编号： 
								</label>
								<div class="col-sm-8">
									<input type="text" id="serialNo" placeholder="商品类型编号"
										class="col-xs-10 col-sm-5" name="serialNo" />
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-3 control-label no-padding-right"
									for="form-field-1"> 类型名称： 
								</label>
								<div class="col-sm-8">
									<input type="text" id="form-field-1" placeholder="商品类型名称"
										class="col-xs-10 col-sm-5" name="name" />
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-3 control-label no-padding-right"
									for="form-field-1"> 备注： 
								</label>
								<div class="col-sm-8">
									<textarea class="form-control" id="form-field-8"
										placeholder="备注" name="remarks"></textarea>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
				<button type="button" id="goodsType-btn" name="save"
					class="btn btn-primary" data-dismiss="modal">
					<i class="ace-icon fa fa-floppy-o bigger-120"></i>保存
				</button>
			</div>
		</div>
	</div>
</div>
<!-- /.modal -->


<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	var script = [ null, "/static/custom/common/simple-table.js", null ]
	$.ace_ajax_finish(script, function() {
		jQuery(function($) {

			/** 初始化数据 **/
			var data = /*[[${goodsTypes}]]*/null;
			var jsonData = {};
			for (var index in data) {
				var id = data[index].id;
				jsonData[id] = data[index];
			}
						
			var table = new SimpleTable();
			table.init("/base/goodstype", jsonData, "/base/goodstype/page", 3); // 初始化表格

			table.addSaveMethod("create-goodsType-btn", "goodsType-btn", {
				"id" :"input",
				"serialNo" : "input",
				"name" : "input",
				"remarks" : "textarea"
			}); // 添加保存操作

			table.addDelMethod("delete-goodsType-btn", "del-goodsType-checkbox",
					"deleteAll-goodsType-btn"); // 添加删除操作

			table.addUpdateMethod("update-goodsType-btn", "goodsType-btn", {
				"id" : "input",
				"serialNo" : "input",
				"name" : "input",
				"remarks" : "textarea"
			});// 添加修改操作
			
			
			
	
			
			 $('#create-goodsType-btn').click(function(){
				  
	                $.ajax({
                        url:"/base/goodstype/getSerialNo",
                        type : 'GET',
                        dataType : 'json',
                        success:function(data) {
                        	
                      $('#serialNo').val(data);
                        }
                       
	                })
				 
			 });
			 var validate_serialNo_rule = {
	                    required: true ,
	                    alphabetAndNum: true,	//只能数字或字母
	                    
	                    remote: function() {
	                        return '/base/goodstype/validation/'+$('#serialNo').val()
	                    }
	                } ;
			 $('#edit-goodstype-form').validate({
                 errorElement: 'div',
                 errorClass: 'help-block',
                 focusInvalid: false,
                 ignore: "",
                 rules:{
                	 serialNo: validate_serialNo_rule
                 },
                 messages: {
                	 serialNo: {
                         required:'请输入商品类型编号',
                         alphabetAndNum:'请输入输入数字或字母',
                         remote:'商品类型已存在'
                     },
                 },
				 
				 
			 });
			 
		})
	});
	/*]]>*/
</script>